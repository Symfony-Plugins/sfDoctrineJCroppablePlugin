mkdir -p myproject/lib/vendor
cd myproject/lib/vendor
svn co http://svn.symfony-project.com/branches/1.3 symfony

cd ../..

php lib/vendor/symfony/data/bin/symfony generate:project myproject

chmod 777 log/ cache/ -R

php symfony generate:app frontend
php symfony generate:app backend

php symfony plugin:publish-assets

// No need to change config/ProjectConfiguration.class.php in symfony 1.3

// vhost:
sudo cp /etc/apache2/sites-available/myfamily /etc/apache2/sites-available/myproject
sudo ln -s ../sites-available/myproject /etc/apache2/sites-enabled/
sudo vim /etc/apache2/sites-available/myproject
sudo vim /etc/hosts
sudo /etc/init.d/apache2 reload

mysqladmin -uroot -p create myprojectdb
php symfony configure:database "mysql:host=localhost;dbname=myprojectdb" dev dev

config/doctrine/schema.yml:

Image:
  actAs:
    JCroppable:
      images: [ image ]
  columns:
    image:  { type: string(128), notnull: true }
    caption: { type: string(128), notnull: false }

php symfony plugin:install sfDoctrineJCroppable
  auto: php symfony plugin:install sfImageTransformPlugin
php symfony cc

Add sfImageTransform config to apps/backend/config/app.yml:

all:
  sfImageTransformPlugin:
    default_adapter: GD
    mime_type:
      auto_detect: true
      library: gd_mime_type

enable sfDoctrineJCroppablePlugin in config/ProjectConfiguration.class.php:

$this->enablePlugins(array('sfDoctrinePlugin', 'sfImageTransformPlugin', 'sfDoctrineJCroppablePlugin'));

php symfony doctrine:build-all-reload

php symfony doctrine:generate-admin backend Image --module=image

Download jquery & jcrop:

web/js/jquery-1.3.2.min.js
web/js/jquery.Jcrop.min.js
web/css/jquery.Jcrop.css

include them in module's view.yml:

default:
  javascripts:    [jquery-1.3.2.min.js, jquery.Jcrop.min.js]
  stylesheets:    [jquery.Jcrop.css]

configure widgets in form lib/form/doctrine/ImageForm.class.php:

    unset($this->widgetSchema['created_at']);
    unset($this->widgetSchema['updated_at']);
    unset($this->validatorSchema['created_at']);
    unset($this->validatorSchema['updated_at']);

    $this->getObject()->configureJCropWidgets($this);
    $this->getObject()->configureJCropValidators($this);

mkdir -p web/uploads/images/Image
chmod 777 web/uploads/images/Image


